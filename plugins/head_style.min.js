!function(){"use strict";function e(){var e={type:"other",version:"0.3.3",name:Lampa.Lang.translate("name_plugin"),description:Lampa.Lang.translate("plugin_description"),component:"head_filter"};Lampa.Manifest.plugins=e;const a={head_filter_show_search:{name:Lampa.Lang.translate("search"),element:".open--search"},head_filter_show_settings:{name:Lampa.Lang.translate("settings"),element:".open--settings"},head_filter_show_profile:{name:Lampa.Lang.translate("profile"),element:".open--profile"},head_filter_show_fullscreen:{name:Lampa.Lang.translate("fullscreen"),element:".full--screen"},head_filter_show_notice:{name:Lampa.Lang.translate("notice"),element:".notice--icon"},head_filter_show_aisearch:{name:Lampa.Lang.translate("aisearch"),element:".ai-search-header-btn"},head_filter_show_time:{name:Lampa.Lang.translate("time"),element:".head__time"},head_filter_style_background:{name:Lampa.Lang.translate("style_background"),style:!0,element:".head__body"}};function n(e,a){const n=Lampa.Head.render();if(!n||!n.length)return;const t=n.find(e);t.length&&(a?t.removeClass("hide").css("display",""):t.addClass("hide").css("display","none"))}function t(e,a){let n=0;const t=setInterval((function(){const r=Lampa.Head.render();if(r&&r.length){const n=r.find(e);if(n.length)return a?n.removeClass("hide").css("display",""):n.addClass("hide").css("display","none"),void clearInterval(t)}n++,n>=100&&clearInterval(t)}),100)}function r(){Object.keys(a).forEach((e=>{const r=Lampa.Storage.get(e,!0),i=a[e].element;if(i)if(a[e].style){const e=Lampa.Head.render();if(!e||!e.length)return;const a=e.find(i);a.length&&(r?a.addClass("head__body--background"):a.removeClass("head__body--background"))}else"head_filter_show_notice"===e||"head_filter_show_profile"===e?t(i,r):n(i,r)}))}Lampa.Storage.listener.follow("change",(e=>{if("activity"===e.name)setTimeout(r,500);else if(e.name in a){const r=Lampa.Storage.get(e.name,!0),i=a[e.name].element;if(!i)return;if(a[e.name].style){const e=Lampa.Head.render();if(!e||!e.length)return;const a=e.find(i);return void(a.length&&(r?a.addClass("head__body--background"):a.removeClass("head__body--background")))}"head_filter_show_notice"===e.name||"head_filter_show_profile"===e.name?t(i,r):n(i,r)}})),setTimeout(r,1500),Lampa.Template.add("settings_head_filter","<div></div>"),Lampa.SettingsApi.addParam({component:"interface",param:{type:"button"},field:{name:Lampa.Lang.translate("name_plugin"),description:Lampa.Lang.translate("plugin_description")},onChange:()=>{Lampa.Settings.create("head_filter",{onBack:()=>{Lampa.Settings.create("interface")}})}}),Lampa.SettingsApi.addParam({component:"head_filter",param:{type:"title"},field:{name:Lampa.Lang.translate("name_menu_filter")}}),Object.entries(a).forEach((([e,a])=>{a.style||Lampa.SettingsApi.addParam({component:"head_filter",param:{name:e,type:"trigger",default:!0},field:{name:a.name}})})),Lampa.SettingsApi.addParam({component:"head_filter",param:{type:"title"},field:{name:Lampa.Lang.translate("name_menu_style")}}),Object.entries(a).forEach((([e,a])=>{a.style&&Lampa.SettingsApi.addParam({component:"head_filter",param:{name:e,type:"trigger",default:!1},field:{name:a.name}})})),Lampa.Template.add("settings_head_style","\n      <style>\n      .head__body--background {\n        background-color: rgba(0, 0, 0, 0.3);\n        border-radius: 1em;\n      }\n      </style>\n      "),$("body").append(Lampa.Template.get("settings_head_style",{},!0))}Lampa.Lang.add({name_plugin:{ru:"Настройка шапки",en:"Header settings"},plugin_description:{ru:"Плагин для настройки шапки",en:"Plugin for customizing the header"},name_menu_filter:{ru:"Отображать в шапке",en:"Display in header"},name_menu_style:{ru:"Стиль шапки",en:"Header style"},search:{ru:"Поиск",en:"Search"},settings:{ru:"Настройки",en:"Settings"},profile:{ru:"Профиль",en:"Profile"},fullscreen:{ru:"Полный экран",en:"Fullscreen"},fullscreen:{ru:"Полный экран",en:"Fullscreen"},notice:{ru:"Уведомления",en:"Notifications"},aisearch:{ru:"ИИ поиск",en:"AI search"},time:{ru:"Время",en:"Clock"},style_background:{ru:"Подложка для шапки",en:"Header background"}}),window.appready?e():Lampa.Listener.follow("app",(a=>{"ready"===a.type&&e()}))}();